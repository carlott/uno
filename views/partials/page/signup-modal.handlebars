<!-- Button trigger modal 
<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#signUpModal">
    Launch Normal Form
</button>
-->

<!-- Modal -->
<div class="modal fade" id="signUpModal" tabindex="-1" role="dialog" 
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close" 
                   data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    Sign Up
                </h4>
            </div>
            
            <!-- Modal Body -->
            <div class="modal-body">
                
                <form role="form" method="post" action="signup">
                  <div class="form-group">
                    <label for="selectAvatar">Select avatar:</label>
                    {{> page/select-avatar}}
                  </div>
                  <div class="form-group">
                    <label for="userName">User name</label>
                      <input type="name" class="form-control" name="userName" required
                      id="signUpUserName" placeholder="Enter name"/>
                  </div>
                  <div class="form-group">
                    <label for="signUpEmail">Email address</label>
                      <input type="email" class="form-control" name="email" required
                        id="signUpEmail" placeholder="Enter email"/>
                      <p id="signUpEmailWarning" class="warning collapse">The email is already registered, please choose another one.</p>
                  </div>
                  <div class="form-group">
                    <label for="signUpPassword">Password</label>
                      <input type="password" class="form-control" name="password" required
                          id="signUpPassword" placeholder="Password"/>
                  </div>
                
                  <button type="reset" class="btn btn-default reset-button">Reset</button>
                  <button class="btn btn-default" formnovalidate>Cancel</button>
                  <button type="submit" class="btn btn-primary"
                        id="signUpSubmit">Sign Up</button>
                </form>
                
            </div>
        </div>
    </div>
</div>

<script>
  $(function() {
    $('#signUpEmail').focusout(function() {
      // ajax call will go here
      $.get('/signup/email-address', { emailAddress: $('#signUpEmail').val() }
            , function(response) {
              if(response == "TAKEN") {
                $('#signUpEmailWarning').addClass("in")
              } else {
                $('#signUpEmailWarning').removeClass("in")
              }
            })
    })
  })
</script>